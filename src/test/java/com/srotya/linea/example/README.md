# Example Topology

The example topology is a 3 stage pipeline consisting of 1 Spout and 2 Bolts and is also something that I use to 
benchmark the performance of Linea.

The topology doesn't really do anything productive other than generate a lot of dummy events from the [TestSpout](https://github.com/srotya/linea/blob/generics/src/test/java/com/srotya/linea/example/TestSpout.java) that are first sent to [TransformBolt](https://github.com/srotya/linea/blob/generics/src/test/java/com/srotya/linea/example/TransformBolt.java) and then sent to [PrinterBolt](https://github.com/srotya/linea/blob/generics/src/test/java/com/srotya/linea/example/PrinterBolt.java)

This topology uses an [Event](https://github.com/srotya/linea/blob/generics/src/test/java/com/srotya/linea/example/Event.java) as it's Tuple which essentially adds a Map<String, Object> field to the [AbstractTuple](https://github.com/srotya/linea/blob/generics/src/main/java/com/srotya/linea/AbstractTuple.java)

### Components
1. TestSpout
2. TransformBolt
3. PrinterBolt

AckerBolt is always present in Linea to provide ```at least once``` processing guarantee.

#### Test Spout

This Spout produces a fixed number of tuples as specified by the constructor argument. It also adds the tuple's id to a hashset to track whether or not an ack was received for the tuples.

Once it's done producing Tuples (events in this case) it runs a while loop to frequently check if all the events generated by this Spout have been acknowledged. Once acknowledged these event / tuple ids are evicted from the hashset.

#### Transform Bolt

All this bolt does is add an additional field to the Event and then forward it to Printer Bolt

#### Printer Bolt

All this bolt does is acknowledge all events it receives.
